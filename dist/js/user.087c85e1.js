(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1511:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user"}},[n("mt-header",{attrs:{fixed:"",title:"用户中心"}}),t.isLogin?t._e():n("my-login",{on:{getLogSta:t.getLogSta}}),t.isLogin?n("my-userdis"):t._e(),n("div",{staticClass:"blank"},[t.isLogin?n("van-button",{staticClass:"logout",staticStyle:{"border-radius":"8px"},attrs:{type:"danger",size:"large"},on:{click:t.logout}},[t._v("注销")]):t._e()],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("h2",[t._v("用户登录")]),n("hr"),n("mt-field",{attrs:{type:"text",label:"用户名",placeholder:"请输入用户名",state:t.unstate},nativeOn:{"!blur":function(e){return t.checkUname(e)}},model:{value:t.uname,callback:function(e){t.uname=e},expression:"uname"}}),n("hr"),n("mt-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",state:t.upstate},nativeOn:{"!blur":function(e){return t.checkUpwd(e)}},model:{value:t.upwd,callback:function(e){t.upwd=e},expression:"upwd"}}),n("hr"),n("mt-button",{attrs:{size:"large",type:"primary"},on:{click:t.login}},[t._v("登录")]),n("router-link",{staticClass:"register",attrs:{to:"/register"}},[n("span",{staticClass:"iconfont icon-zhuce"}),t._v("没有账号？现在注册 ")])],1)},o=[],c=(n("99af"),{data:function(){return{uname:"",upwd:"",unstate:"",upstate:""}},created:function(){},methods:{checkUname:function(){""!==this.uname?this.unstate="success":this.unstate="error"},checkUpwd:function(){""!==this.upwd?this.upstate="success":this.upstate="error"},login:function(){var t=this;if("success"==this.unstate&&"success"==this.upstate){var e=this.uname,n=this.upwd,a="/local/login",s="uname=".concat(e,"&upwd=").concat(n);this.axios.post(a,s).then((function(n){var a=n.data;-1==a.code?(t.$messagebox("提示",a.msg),t.$emit("getLogSta",!1)):1==a.code&&(t.$toast({message:"登录成功",position:"middle",duration:"2000",iconClass:"iconfont icon-chenggong"}),t.$emit("getLogSta",!0,e),setTimeout((function(){}),2e3))}))}else this.$messagebox("提示","用户名或密码格式不正确"),this.$emit("getLogSta",!1)}}}),l=c,r=(n("8973"),n("2877")),u=Object(r["a"])(l,i,o,!1,null,"90a09432",null),m=u.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"useDis"}},[n("div",{staticClass:"userInfo"},[n("div",{staticClass:"unameBox"},[n("div",{staticClass:"uname"},[t._v(t._s(t.uname))])])]),n("div",{staticClass:"tool"},[n("mt-cell",{staticClass:"toolItem",attrs:{title:"我的收藏",value:"查看"}}),n("mt-cell",{staticClass:"toolItem",attrs:{title:"生日"}},[t.birth?n("span",{on:{click:t.checkBirth}},[t._v(t._s(t.birth))]):t._e()]),n("van-datetime-picker",{staticClass:"checkBirth",staticStyle:{display:"none"},attrs:{type:"year-month","min-date":t.minDate,"max-date":t.maxDate,"item-height":"30","visible-item-count":"5"},on:{confirm:t.confirmBirth,cancel:t.cancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)])},h=[],g={data:function(){return{uname:"",status:"",birth:"选择",minDate:new Date(1949,0,1),maxDate:new Date(2020,12,31),currentDate:new Date}},mounted:function(){this.getInfo()},methods:{getInfo:function(){var t=window.localStorage.getItem("uname"),e=window.localStorage.getItem("isLogin"),n=window.localStorage.getItem("birth");this.uname=t,this.status=e?"已登录":"未登录",this.birth=n||"选择"},confirmBirth:function(t){var e=t.getFullYear(),n=t.getMonth()+1;this.birth="".concat(e,"-").concat(n),window.localStorage.setItem("birth",this.birth);var a=document.getElementsByClassName("checkBirth")[0];a.style.display="none"},cancel:function(){var t=document.getElementsByClassName("checkBirth")[0];t.style.display="none"},checkBirth:function(){var t=document.getElementsByClassName("checkBirth")[0];t.style.display="block"}}},f=g,p=(n("6321"),Object(r["a"])(f,d,h,!1,null,"44136df8",null)),v=p.exports,w={data:function(){return{isLogin:!1,uname:""}},components:{myLogin:m,myUserdis:v},mounted:function(){this.loadPage()},methods:{getLogSta:function(t,e){this.isLogin=t,this.uname=e,window.localStorage.setItem("isLogin",t),e&&window.localStorage.setItem("uname",e)},loadPage:function(){var t=localStorage.getItem("isLogin"),e=localStorage.getItem("uname");null!=t&&null!=e&&(this.isLogin=t,this.uname=e)},logout:function(){var t=this;this.$messagebox({title:"提示",message:"注销当前账号",showCancelButton:!0}).then((function(e){"confirm"===e&&(window.localStorage.removeItem("uname"),window.localStorage.setItem("isLogin",!1),t.isLogin=!1)}))}}},b=w,y=(n("7ffa"),Object(r["a"])(b,a,s,!1,null,"21ad53c0",null));e["default"]=y.exports},"36d8":function(t,e,n){},6321:function(t,e,n){"use strict";var a=n("36d8"),s=n.n(a);s.a},"7c51":function(t,e,n){},"7ffa":function(t,e,n){"use strict";var a=n("7c51"),s=n.n(a);s.a},8973:function(t,e,n){"use strict";var a=n("9c78"),s=n.n(a);s.a},"9c78":function(t,e,n){}}]);
//# sourceMappingURL=user.087c85e1.js.map